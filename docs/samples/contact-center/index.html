<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Webex JavaScript SDK Sample: Meetings Plugin</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <!-- Expand and Collapse -->
  <div class="box global-toggle-btn-wrapper">
    <button onclick="expandAll()" class="global-toggle-btn" title="Expand all">
      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <div style="display: flex; flex-direction: column;">
          <i class="g-arrow fa fa-angle-up" aria-hidden="true"></i>
          <i class="g-arrow fa fa-angle-down" aria-hidden="true" style="margin-top: -6px;"></i>
        </div>
        <div>EXPAND ALL</div>
      </div>
    </button>

    <button onclick="collapseAll()" class="global-toggle-btn" title="Collapse all">
      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <div style="display: flex; flex-direction: column;">
          <i class="g-arrow fa fa-angle-down" aria-hidden="true"></i>
          <i class="g-arrow fa fa-angle-up" aria-hidden="true" style="margin-top: -8px;"></i>
        </div>
        <div>COLLAPSE ALL</div>
      </div>
    </button>
  </div>

  <!-- Webex CC / authentication-credentials -->
  <div class="box">
    <section class="section-box">
      <h2 class="collapsible">
        Auth & Registration
        <i class="arrow fa fa-angle-up" aria-hidden="true"></i>
      </h2>

      <div class="section-content">
        <div>
          <select name="auth-type" id="auth-type" onchange="changeAuthType()">
            <option value="accessToken">Access Token</option>
          </select>
        </div>

        <fieldset>
          <legend>Authentication</legend>

          <form id="credentials">
            <p class="note">
              NOTE: Click <a href="https://developer.webex.com/docs/getting-started" target="_blank">here</a> for
              access token
            </p>
            <div>
              <input id="access-token" name="accessToken" placeholder="Access Token" value="" type="text">
              <button id="access-token-save" class="btn-code" type="submit">webex.init()</button>
              <p id="access-token-status" class="status-par">Not initialized</p>
            </div>
          </form>
        </fieldset>
      </div>

       <!-- contact-center / web socket connection setup -->
       <div>
        <form id="webexcc-registration">
          <fieldset>
            <legend>Registration</legend>
            <p class="note">
              NOTE: Webex CC SDK websocket connection setup
            </p>
            <div class="u-mv">
              <button id="webexcc-register" type="button" onclick="register()" disabled=""
                class="btn-code">webex.cc.register()</button>
              <p id="ws-connection-status" class="status-par">Not Subscribed</p>
            </div>
          </fieldset>
        </form>
      </div>
  </div>
  </section>
  </div>

    <div class="box">
      <section class="section-box">
        <h2 class="collapsible">
          Agent Station Login/Logout
          <i class="arrow fa fa-angle-down" aria-hidden="true"></i>
        </h2>

        <div class="section-content">
          <fieldset>
            <legend>Agent</legend>
            <p class="note">
              NOTE: Teams are fetched automatically for the Agent Login.
            </p>
            <div class="screenshare-section">
              <div style="display: flex; gap: 1rem;">
                <fieldset style="flex: 0.69;">
                  <legend>Select Team</legend>
                  <select id="teamsDropdown" class="form-control w-auto my-3">Teams</select>
                </fieldset>
                <fieldset>
                  <legend>Agent Login</legend>
                  <select name="AgentLogin" id="AgentLogin" class="AgentLogin" onchange="handleAgentLogin(event)">
                    <option value="" selected hidden>Choose Agent Login ...</option>
                  </select>
                  <input id="dialNumber" name="dialNumber" placeholder="Dial Number" value="" type="text">
                  <button id="loginAgent" disabled class="btn btn-primary my-3" onclick="doAgentLogin()">Login With
                    Selected Team</button>
                  <button id="logoutAgent" class="btn btn-primary my-3 ml-2 hidden" onclick="logoutAgent()">Logout Agent</button>
                </fieldset>
                <fieldset>
                  <legend>Agent status</legend>
                  <select name= "idleCodesDropdown" id="idleCodesDropdown" class="form-control w-auto my-3" onchange="handleAgentStatus(event)">
                  <option value="" selected hidden>Select Idle Codes</option>
                  </select>
                  <button id="setAgentStatus" disabled class="btn btn-primary my-3 ml-2" onclick="setAgentStatus()">Set Agent
                    Status</button>
                </fieldset>
              </div>
              <fieldset id="buddyAgentsBox">
                <legend>Buddy Agents</legend>
                <button id="fetchBuddyAgents" class="btn btn-primary my-3" onclick="fetchBuddyAgents()">Get Buddy Agents</button>
                <select id="buddyAgentsDropdown" class="form-control w-auto my-3"></select>
              </fieldset>
            </div>
          </fieldset>
        </div>
         <!-- calling / incoming -->
         <div id="incomingsection">
          <fieldset>
            <legend>Incoming Call</legend>
            <div class="u-mv">
              <pre id="incoming-call"> No Incoming Calls</pre>
              <button onclick="answer()" disabled="" id="answer" class="btn--green">Answer</button>
              <button onclick="decline()" disabled="" id="end" class="btn--red">Decline</button>
            </div>
          </fieldset>
        </div>
      </section>
    </div>
  </div>

  <script src="../webex.min.js"></script>
  <script src="../contact-center.min.js"></script>
  <script src="app.js"></script>
</body>

</html>
